开发一个基于Spring Boot和Spring MVC的自动化仓库管理系统

### 基本需求
1. **定义和文档化一套Restful API**：(down)
   - 需要使用Json或Open API文档格式来定义API。
   - 这要求对API的功能、参数、返回类型等进行详细说明。

2. **在Java中使用Spring MVC和Boot实现API**：(down)
   - 利用Spring Boot框架快速搭建和配置项目基础。
   - 使用Spring MVC来处理HTTP请求和响应。

3. **实现数据仓储层至少使用关系型数据库管理系统(RDBMS)**：(down)
   - 需要设计数据库模型并实现数据交互。
   - 可以选择MySQL、PostgreSQL等流行的RDBMS。

4. **使用Boot测试框架和Web API进行测试**：(down)
   - 编写单元测试和集成测试来验证API的功能和性能。
   - 测试API的响应和处理逻辑是否符合需求。

5. **API认证及必要的Web UI开发**：(down)
   - 实现API的安全认证机制，如OAuth或JWT。
   - 如有需要，还应开发辅助的Web界面。

### 额外实现（加分项）
1. **缓存（Caching）**：(down)
   - 减少数据库访问次数，提高应用性能。
   
2. **会话控制（Session Control）**：(down)
   - 管理用户会话，保证系统的安全性和用户状态的连续性。
   
3. **日志（Log）**：(down)
   - 记录应用运行时的重要信息，便于问题追踪和系统监控。
   
4. **限流（Rate Limiting）**：(down)
   - 控制API的请求频率，防止过载。

### 交付要求
1. **提交源代码和测试截图至代码仓库**（如Github或Gitee）。
2. **提供一份报告**，详细说明开发过程、使用技术、测试结果等。
3. **截止日期**：2023年4月30日。



# Swagger UI
`localhost:8080/doc.html`

# OpenApi
`localhost:8080/v3/api-docs`



基本业务流程概述：
创建订单：

接收订单数据（包括用户信息、商品明细等）。
验证库存是否足够。
扣减库存，生成订单。
记录订单相关操作。
处理出库任务：

根据订单创建出库任务。
更新任务状态（例如从"Pending"变为"InProgress"）。
完成后更新状态为"Completed"。
处理入库任务：

接收入库货物信息。
更新或增加库存。
记录入库任务和货物详细信息。
异常订单处理：

检测到问题（如库存不足）时生成异常信息。
更新订单状态为“Exception”。
记录异常详细信息。


1. 订单表（Orders）
   订单表通常用来记录客户的订单详情，包括订单状态和时间戳。以下是与订单表相关的一些基本业务逻辑：

创建订单
验证用户信息：确认下单的用户是否存在于系统中。
库存检查：对于订单中的每个商品，检查是否有足够的库存。
创建订单：如果库存充足，减少相应的库存数量，并创建订单记录。
记录订单状态：初始化订单状态为"Pending"。
更新订单状态
处理订单：根据业务需要更新订单状态，如从"Pending"变更为"Processing"。
发货：当订单状态变更为"ReadyForShipment"，进一步更新为"Shipped"。
异常处理：如果出现问题（比如库存突然不足），更新状态为"Exception"，并记录相关信息。
取消订单
检查可取消性：某些状态下的订单可能不允许取消（如已发货）。
更新状态为取消：如果可以取消，更新订单状态，并将库存数量回滚。
订单查询
按用户查询：允许用户查询自己的订单历史。
按状态查询：允许管理员根据订单状态进行查询。

2. 订单商品表（OrderItems）
   订单商品表用于记录订单中每个商品的具体信息，包括数量和关联的产品ID。这个表是与订单表强关联的，常用于管理订单中的具体商品详情。

添加商品到订单
验证商品存在：确保添加到订单中的商品在产品表中存在。
库存检查：验证所需数量的商品是否有足够的库存。
创建订单商品条目：为每个商品创建一个订单商品条目，并关联到具体的订单。
更新订单商品
更改数量：根据需要调整商品数量，同时更新库存。
删除商品：从订单中移除商品，并更新库存。
查询订单商品
按订单查询：允许查询某个订单中的所有商品条目。
商品详情：包括数量和商品信息，如名称和价格。


3. 订单异常表（OrderExceptions）
   订单异常表用来记录订单处理过程中出现的任何异常情况。这包括了异常的详细描述、相关联的订单ID以及异常创建的时间。管理这类信息有助于提高客户服务质量和后续的问题解决效率。

记录异常
创建异常记录：当订单处理过程中发生异常时（例如库存不足、支付失败等），创建一个异常记录。
关联订单：确保每个异常记录都能明确指向一个具体的订单。
更新异常记录
更新描述：在问题解决进程中可能需要更新异常的描述或状态。
关闭异常：一旦问题被解决，更新异常记录为已解决状态。
查询异常
按订单查询异常：能够查询特定订单的所有相关异常。
按日期查询：按创建日期查询异常记录，帮助快速定位特定时间发生的问题。


4. 入库任务表（InboundTasks）
   入库任务表用于管理入库流程，包括记录任务的状态、创建和更新时间。这个表通常与入库货物表（InboundItems）相关联，后者记录具体的商品和数量。

创建入库任务
初始化任务：创建一个新的入库任务时，设置其状态为"Pending"。
记录创建时间：设置任务的创建时间。
更新任务状态
分配任务：当任务被分配给特定的仓库员工时，更新状态为"Assigned"。
完成任务：任务完成时，更新状态为"Completed"。
删除或取消任务
取消未开始的任务：如果入库任务还未开始，可以将其取消。
查询入库任务
按状态查询：能够查询不同状态的入库任务。
按日期范围查询：查询在特定日期范围内创建或更新的任务。


5. 入库货物表（InboundItems）
   入库货物表用于详细记录每个入库任务中涉及的具体商品信息，包括商品的数量和生产日期。这个表与入库任务表（InboundTasks）紧密相关，通常用于跟踪入库产品的详细情况。

添加入库货物
验证产品存在性：确保被记录的产品存在于产品表中。
创建入库货物记录：为每个入库的产品创建记录，包括数量和生产日期。
关联入库任务：确保每条货物记录都关联到一个具体的入库任务。
更新入库货物
调整数量：根据实际情况调整货物数量。
更新生产日期：如果有必要，更新商品的生产日期信息。
删除入库货物
删除记录：如果入库货物被错误记录或入库任务被取消，相应的货物记录也应该被删除。
查询入库货物
按任务查询：查询特定入库任务关联的所有货物。
按产品查询：能够查看特定产品的入库记录。


6. 库存表（Inventory）
   库存表用于管理产品库存的当前状态，包括数量和最后更新时间。它是与产品表紧密相关的关键表，因为它直接影响订单处理和库存控制的能力。

更新库存
增加库存：当接收到入库货物时，相应地增加库存数量。
减少库存：当订单中的商品被确认时，相应地减少库存数量。
定期审核：定期检查库存数据，以确保其准确性。
查询库存
按产品查询：查询特定产品的当前库存量。
库存警告：标识库存量低于安全水平的产品，以便及时补充。
定时更新库存状态
定时任务：定时更新库存的状态，包括检查过期产品，更新最后库存时间等。


7. 出库任务表（OutboundTasks）
   出库任务表用于管理和跟踪订单的出库流程，记录与之相关的任务状态、创建时间和更新时间。这个表是关键的操作点，特别是在物流和分销环节。

创建出库任务
初始化出库任务：当订单状态变为"ReadyForShipment"时，创建一个新的出库任务，设置其状态为"Pending"。
记录任务和订单关联：确保每个出库任务都能明确指向一个具体的订单。
更新出库任务状态
分配任务：当任务被分配给特定的物流操作员时，更新状态为"InProgress"。
完成任务：任务完成时，更新状态为"Completed"。
处理异常：如遇到任何问题（比如货物损坏、地址错误等），记录相应的异常并更新状态。
查询出库任务
按状态查询：查询不同状态的出库任务，以监控和调度。
按日期查询：查找在特定日期范围内创建或更新的出库任务。


8. 出库货物表（OutboundItems）
   出库货物表用于详细记录每个出库任务中涉及的具体商品信息，包括商品的数量和关联的出库任务ID。这个表与出库任务表（OutboundTasks）紧密相关，通常用于跟踪出库产品的详细情况。

添加出库货物
验证产品和任务存在性：确保被记录的产品和出库任务都在相应的表中存在。
创建出库货物记录：为每个出库的产品创建记录，包括数量。
关联出库任务：确保每条货物记录都关联到一个具体的出库任务。
更新出库货物
调整数量：根据实际情况调整货物数量。
更新任务关联：如果需要，更新货物记录关联的出库任务。
删除出库货物
删除记录：如果出库货物被错误记录或出库任务被取消，相应的货物记录也应该被删除。
查询出库货物
按任务查询：查询特定出库任务关联的所有货物。
按产品查询：能够查看特定产品的出库记录。

9.products
添加产品信息：添加数据库中的产品信息；
获取产品信息：从缓存中检索产品信息；如果缓存未命中，则从数据库获取并更新缓存。
更新产品信息：更新数据库中的产品信息，并更新缓存中相应的数据。
删除产品信息：删除数据库中的产品信息
删除产品缓存：在产品信息被更新或需要强制刷新时删除缓存。







### 1. 订单管理 API (down)

#### 创建订单
- **POST /orders**
   - **描述**：创建一个新订单，同时进行库存检查和用户验证。
   - **请求体**：包含用户ID、商品列表（每个商品包括产品ID和数量）。
   - **响应**：订单详情，包括订单ID、订单状态等。

#### 更新订单状态
- **PATCH /orders/{orderId}**
   - **描述**：更新订单的状态。
   - **路径参数**：`orderId` - 订单的唯一标识。
   - **请求体**：包含新的订单状态。
   - **响应**：更新后的订单详情。

#### 取消订单
- **DELETE /orders/{orderId}**
   - **描述**：取消订单，并回滚库存。
   - **路径参数**：`orderId` - 订单的唯一标识。
   - **响应**：操作结果。

#### 查询订单
- **GET /orders**
   - **描述**：根据用户或状态查询订单。
   - **查询参数**：`userId`, `status`。
   - **响应**：符合条件的订单列表。

### 2. 订单商品管理 (down)

#### 添加商品到订单
- **POST /order-items**
   - **描述**：为特定订单添加商品。
   - **请求体**：订单ID、商品ID和数量。
   - **响应**：新创建的订单商品条目详情。

#### 更新订单商品
- **PATCH /order-items/{orderItemId}**
   - **描述**：更新订单中某个商品的数量。
   - **路径参数**：`orderItemId` - 订单商品条目的唯一标识。
   - **请求体**：新的数量。
   - **响应**：更新后的订单商品条目详情。

#### 删除订单商品
- **DELETE /order-items/{orderItemId}**
   - **描述**：从订单中删除一个商品，并更新库存。
   - **路径参数**：`orderItemId`。
   - **响应**：操作结果。

### 3. 订单异常管理 API(down)

#### 记录异常
- **POST /order-exceptions**
   - **描述**：记录订单处理中的异常。
   - **请求体**：订单ID、异常描述。
   - **响应**：异常记录详情。

#### 更新异常记录
- **PATCH /order-exceptions/{exceptionId}**
   - **描述**：更新异常描述或状态。
   - **路径参数**：`exceptionId` - 异常记录的唯一标识。
   - **请求体**：新的异常描述或状态。
   - **响应**：更新后的异常记录详情。

#### 查询异常
- **GET /order-exceptions**
   - **描述**：按订单ID或日期查询异常记录。
   - **查询参数**：`orderId`, `date`。
   - **响应**：异常记录列表。

### 4. 入库任务管理 API(DOWN)

#### 创建入库任务
- **POST /inbound-tasks**
   - **描述**：创建一个新的入库任务。
   - **请求体**：相关细节，如员工ID、预定入库时间等。
   - **响应**：入库任务详情。

#### 更新入库任务状态
- **PATCH /inbound-tasks/{taskId}**
   - **描述**：更新入库任务的状态。
   - **路径参数**：`taskId`。
   - **请求体**：新的任务状态。
   - **响应**：更新后的任务详情。

#### 查询入库任务
- **GET /inbound-tasks**
   - **描述**：按状态或日期范围查询入库任务。
   - **查询参数**：`status`, `startDate`, `endDate`。
   - **响应**：符合条件的入库任务列表。

### 5. 出库任务管理 API(down)

#### 创建出库任务
- **POST /outbound-tasks**
   - **描述**：为订单创建出库任务。
   - **请求体**：订单ID、预定出库时间等。
   - **响应**：出库任务详情。

#### 更新出库任务
#### 更新出库任务状态
- **PATCH /outbound-tasks/{taskId}**
   - **描述**：更新出库任务的状态。
   - **路径参数**：`taskId` - 出库任务的唯一标识。
   - **请求体**：包含新的任务状态。
   - **响应**：更新后的出库任务详情。

#### 查询出库任务
- **GET /outbound-tasks**
   - **描述**：按状态或日期范围查询出库任务。
   - **查询参数**：`status`, `startDate`, `endDate`。
   - **响应**：符合条件的出库任务列表。

### 6. 库存管理 API

#### 更新库存
- **PATCH /inventory/{productId}**
   - **描述**：更新指定产品的库存数量。
   - **路径参数**：`productId` - 产品的唯一标识。
   - **请求体**：包含库存的增加或减少数量。
   - **响应**：更新后的库存详情。

#### 查询库存
- **GET /inventory**
   - **描述**：查询特定产品的当前库存量。
   - **查询参数**：`productId`。
   - **响应**：指定产品的库存详情。

#### 库存警告
- **GET /inventory/warnings**
   - **描述**：查询库存量低于安全水平的所有产品。
   - **响应**：库存警告列表，包括产品ID和当前库存量。

### 7. 产品管理 API(down)

#### 添加产品信息
- **POST /products**
   - **描述**：添加新的产品信息到数据库。
   - **请求体**：包含产品的名称、描述、初始库存量等信息。
   - **响应**：新创建的产品详情。

#### 获取产品信息
- **GET /products/{productId}**
   - **描述**：根据产品ID获取产品信息。
   - **路径参数**：`productId`。
   - **响应**：产品详情。

#### 更新产品信息
- **PATCH /products/{productId}**
   - **描述**：更新指定产品的信息。
   - **路径参数**：`productId`。
   - **请求体**：产品的新信息，如名称、描述等。
   - **响应**：更新后的产品详情。

#### 删除产品信息
- **DELETE /products/{productId}**
   - **描述**：从数据库删除指定的产品信息。
   - **路径参数**：`productId`。
   - **响应**：操作结果。



